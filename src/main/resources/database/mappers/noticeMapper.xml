<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
  <mapper namespace="com.arc.s3.board.notice.NoticeDAO">
  
  
  	<select id="getList" parameterType="Pager" resultType="com.arc.s3.board.notice.NoticeDTO">
  	select * from
	(select rownum R, N.* from 
	(select * from notice where
	<choose>
		<when test ="kind=='Writer'">Writer</when>
		<when test ="kind=='Contents'">Contents</when>
		<otherwise>Title</otherwise>
	</choose>
	like '%'||#{search}||'%' and num>0 order by num desc) N)
	where R between #{startRow} and #{lastRow}	  
  	</select>
  
  
  	<select id="getTotalCount"  parameterType="Pager" resultType="java.lang.Long">
  	
 	select count(num) from notice
 	where
 	<choose>
 		<when test ="kind == 'Writer'">
 			writer
 		</when>
 		<when test ="kind == 'Contents'">
 			contents
 		</when>
 		<otherwise>
 		title
 		</otherwise>
 	</choose>
  		like '%'||#{search}||'%' and num>0 	
  	</select>
  
  
  
  
  
  
  	<select id="getSelect" parameterType="com.arc.s3.board.BoardDTO" resultType="com.arc.s3.board.notice.NoticeDTO">
  	select * from notice where num = #{num}
  	</select>
  
  	<insert id="setInsert" parameterType="com.arc.s3.board.BoardDTO">
  	insert into notice(num,title,writer,contents) values (notice_seq.NEXTVAL,#{title},#{writer},#{contents})
  	</insert>
  
  	 <update id="setUpdate" parameterType="com.arc.s3.board.BoardDTO">
 	 update notice set title=#{title}, contents=#{contents} where num=#{num}
 	 </update>
  
  
  
  </mapper>  